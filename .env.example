# 通用端口配置
BACKEND_PORT=8483 # 后端端口
FRONTEND_PORT=3015
BACKEND_HOST=0.0.0.0 # 默认为 0.0.0.0，表示监听所有 IP 地址 不建议动
APP_PORT=3015 # docker 部署时用

# 前端访问后端用
# - 建议默认留空：让前端走同源 `/api`（这样 Cloudflare Tunnel/ngrok 公网访问也能正常工作）
# - 如需直连后端（仅本机访问），可填：http://127.0.0.1:8483/api
VITE_API_BASE_URL=
# 仅用于 Vite 开发服务器的代理目标（不影响构建产物）
VITE_DEV_PROXY_TARGET=http://127.0.0.1:8483
# 前端请求超时（毫秒）。Dify 对话/检索可能 >10s，建议 60000+
VITE_API_TIMEOUT_MS=60000

VITE_SCREENSHOT_BASE_URL=
VITE_FRONTEND_PORT=3015
# 生产环境配置
ENV=production
STATIC=/static
OUT_DIR=./static/screenshots
NOTE_OUTPUT_DIR=note_results
IMAGE_BASE_URL=/static/screenshots
DATA_DIR=data
UPLOAD_DIR=uploads
# 日志（可选）
LOG_DIR=logs
LOG_MAX_BYTES=10485760
LOG_BACKUP_COUNT=5
# FFMPEG 配置
FFMPEG_BIN_PATH=

# image_proxy 安全限制（可选）
# - 不填则仅做“禁止私网/回环地址”等基础防护
# - 如需更严格，可填允许域名列表（逗号分隔；支持 `*.example.com` / `.example.com` / `example.com`）
IMAGE_PROXY_ALLOWED_HOSTS=
# 最大响应体大小（字节），默认 10MB
IMAGE_PROXY_MAX_BYTES=10485760

# transcriber 相关配置
TRANSCRIBER_TYPE=fast-whisper # fast-whisper/bcut/kuaishou/mlx-whisper(仅Apple平台)/groq
WHISPER_MODEL_SIZE=base

GROQ_TRANSCRIBER_MODEL=whisper-large-v3-turbo # groq提供的faster-whisper 默认为 whisper-large-v3-turbo

# ------------------------------
# Dify（自建）RAG 配置
# ------------------------------
# Dify base url（不用带 /v1）。本机自建一般是 http://localhost
DIFY_BASE_URL=http://localhost
# 你创建的 Dataset UUID（Knowledge -> Dataset）
DIFY_DATASET_ID=
# 可选：双库模式（推荐）
# - 字幕/转写入库 Dataset（用于时间戳检索）
DIFY_TRANSCRIPT_DATASET_ID=
# - 笔记/Markdown 入库 Dataset（用于结构化知识点检索）
DIFY_NOTE_DATASET_ID=
# Service API Key（用于写入知识库）
DIFY_SERVICE_API_KEY=
# Indexing technique: high_quality / economy (keep consistent with dataset settings)
DIFY_INDEXING_TECHNIQUE=high_quality
# App API Key（用于 /v1/chat-messages 对话）
DIFY_APP_API_KEY=
# Dify chat API 要求 body 里必须有 user 字段；任意稳定字符串即可
DIFY_APP_USER=bilinote

# ------------------------------
# Sync toggles (recommended: manual)
# ------------------------------
# After note generation, auto-upload bundle zip to MinIO
AUTO_MINIO_BUNDLE_ON_GENERATE=false
# After note generation, auto-ingest to Dify Knowledge Base (note+transcript)
# - auto (default): enable when Dify config is present (service key + dataset id)
# - true: always ingest
# - false: never ingest
AUTO_DIFY_INGEST_ON_GENERATE=auto

# RAG 任务输出目录（status/result 文件）
RAG_OUTPUT_DIR=rag_results

# RAG transcript formatting
# Always keep original timestamped segments (no merge).

# ------------------------------
# MinIO / S3（同步原文真源）
# ------------------------------
# MinIO endpoint: "localhost:9000" (no scheme). If you mapped container port 9000 to another host port, use that port.
MINIO_ENDPOINT=
MINIO_ACCESS_KEY=
MINIO_SECRET_KEY=
# true/false
MINIO_SECURE=false
# Bucket isolation per Dify profile: bucket is derived from profile name (S3-safe slug + hash) with this prefix.
MINIO_BUCKET_PREFIX=ragvideo-
# Object key prefix within bucket
MINIO_OBJECT_PREFIX=bundles/
# Tombstone key prefix within bucket (soft-delete marker for multi-device sync)
MINIO_TOMBSTONE_PREFIX=tombstones/
# Optional region (usually empty for MinIO)
MINIO_REGION=
